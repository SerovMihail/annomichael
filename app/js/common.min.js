function fadeOutnojquery(e){e.style.opacity=1;var t=setInterval(function(){e.style.opacity=e.style.opacity-.05,e.style.opacity<=.05&&(clearInterval(t),preloader.style.display="none")},16)}var _=function(){function e(e,t){return new Date(-1*e+t.getTime())}function t(){var e="Mon Jan 1 0000 00:00:00 GMT+0300 (MSK)",t=e.split(" ")[3],a=+t+5e3,r=new Date(e.replace(t,a));return r.setFullYear(r.getFullYear()-5e3),+r}function a(){return new Date(family[0].born.year,family[0].born.month-1,family[0].born.day)}function r(e){return new Date(e,family[0].born.month-1,family[0].born.day).getDay()}function n(e){return e%4==0&&(e%100!=0||e%400==0)}return{getLifeMilliseconds:e,getZeroDate:t,IsLeapYear:n,getMichaelBornDate:a,getMichaelBornDay:r}}();$(function(){"use strict";function e(){var e=new Date,n=void 0,i=void 0;e.getMonth()>1||1==e.getMonth()&&e.getDate()>=13?(n=e.getFullYear(),i=a.michaelAge.toString()):(n=e.getFullYear()-1,i=a.michaelAge.toString());for(var o=_.getMichaelBornDay(n),l=new Date(n,1,13),s=Math.ceil(new Date(e-l).getTime()/a.oneDay),c=t(s),y=c[0],d=c[1],u=c[2],y=y.toString();y.length<3;)y="0"+y;var h=i+" "+u+" "+y,m=e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+" "+["ВС","ПН","ВТ","СР","ЧТ","ПТ","СБ"][e.getDay()];document.getElementsByClassName("time")[0].innerHTML=m,document.getElementsByClassName("date")[0].innerHTML=h,document.getElementsByClassName("alias")[0].innerHTML=d,document.getElementsByClassName("yearLetters")[0].innerHTML=" A. M.",r||(calendar.drawCalendar(s,u,o,a.currentYearIsLeap),r=!0)}function t(e){var t=family[0].daysWithoutPrecision,a=t+family[1].daysWithoutPrecision,r=a+family[2].daysWithoutPrecision,n=r+family[3].daysWithoutPrecision,i=n+family[4].daysWithoutPrecision,o=i+family[5].daysWithoutPrecision,l=o+family[6].daysWithoutPrecision;return console.log(r),e>0&&e<=t?[e,"MICHAEL",1]:e>t&&e<=a?[e-t,"ELIA",2]:e>a&&e<=r?[e-a,"SERGIUS",3]:e>r&&e<=n?[e-r,"EGOR",4]:e>n&&e<=i?[e-n,"VAN",5]:e>i&&e<=o?[e-i,"LEXIUS",6]:e>o&&e<=l?[e-o,"CATHARINA",7]:void console.log("Mistake in algorithm")}var a={zeroDate:_.getZeroDate(),michaelBornDate:_.getMichaelBornDate(),currentDate:new Date,michaelAge:void 0,daysInYear:0,totalPercentOfAges:0,totalDaysWithoutCatharina:0,currentYearIsLeap:void 0,oneDay:864e5};a.currentYearIsLeap=_.IsLeapYear(a.currentDate.getFullYear()),a.daysInYear=a.currentYearIsLeap?366:365;var r=!1;!function(){var e=new Date,t=void 0;t=e.getMonth()>1||1==e.getMonth()&&e.getDate()>=13?e.getFullYear():e.getFullYear()-1,family.forEach(function(e){if(e.age=t-e.born.year,e.percentOfMichaelAges=e.age/family[0].age,a.totalPercentOfAges+=e.percentOfMichaelAges,"Michael"!=e.name){var r=Math.abs(new Date(family[0].born.year,e.born.month-1,e.born.day).getTime()-a.michaelBornDate.getTime());e.daysFromYearStart=Math.floor(r/a.oneDay),e.daysFromYearStartLeapYear=e.daysFromYearStart+1}}),a.michaelAge=family[0].age,family.forEach(function(e){e.daysWithPrecision=a.daysInYear/a.totalPercentOfAges*e.percentOfMichaelAges,e.daysWithoutPrecision=Math.round(e.daysWithPrecision),"Catharina"==e.name?e.daysWithoutPrecision=a.daysInYear-a.totalDaysWithoutCatharina:a.totalDaysWithoutCatharina+=e.daysWithoutPrecision,"Michael"==e.name&&(e.daysWithoutPrecision+=a.currentYearIsLeap?1:0)})}(),setInterval(e,1e3)});var preloader=document.getElementsByClassName("mk-spinner-wrap")[0];window.onload=function(){setTimeout(function(){fadeOutnojquery(preloader)},1e3)};var calendar=function(){function e(e,t,a,r){function n(e){return family.find(function(t){return r?t.daysFromYearStartLeapYear==e-1:t.daysFromYearStart==e-1})}var i=$(".free-month"),o=$(".four-month"),l=r?family.map(function(e){return e.daysFromYearStartLeapYear}):family.map(function(e){return e.daysFromYearStart}),s=1;family.forEach(function(r,c){appendDiv=c>2?o:i;var y="",d="";a>7&&(a=1);for(var u=1;u<a;u++)d+="<td></td>";for(var h=1;h<r.daysWithoutPrecision+1;h++){if(a>7&&(a=1,y+="<tr>"+d+"</tr>",d=""),c+1==t&&s==e&&-1!=l.indexOf(s-1)){var m=n(s);d+="<td class='today "+m.name+"-color' title='Сегодня день рождения у "+m.name+"'>"+h+"</td>"}else if(c+1==t&&s==e)d+="<td class='today' title='Сегодня'>"+h+"</td>";else if(-1!=l.indexOf(s-1)){var m=n(s);d+="<td class='"+m.name+"-color' title='День рождения "+m.name+"'>"+h+"</td>"}else d+="<td>"+h+"</td>";a++,s++}y+="<tr>"+d+"</tr>",d="";var f="<tbody>"+y+"</tbody>",g="<tr><th colspan='7' class='calendar-month-title "+r.name+"-color'>"+r.name+"</th></tr>",p="<thead>"+g+"<tr><th>ПН</th><th>ВТ</th><th>СР</th><th>ЧТ</th><th>ПТ</th><th>СБ</th><th>ВС</th></tr></thead>",v="<table>"+p+f+"</table>";appendDiv.append(v)}),tippy("[title]",{trigger:"mouseenter focus",distance:"1px"}),window.addEventListener("touchstart",function(){document.querySelectorAll(".tippy-popper").forEach(function(e){var t=e._tippy;t.state.visible&&(t.popperInstance.disableEventListeners(),t.hide())})})}return{drawCalendar:e}}();